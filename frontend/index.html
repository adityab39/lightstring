<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LightString</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
  <div id="app">
    <header>
      <div class="logo">LightString</div>
      <nav class="nav-links">
        <a href="#" class="nav-link active">Home</a>
      </nav>
    </header>

    <main>
      <h1>Create beautiful text with <span>Crystal Letters</span></h1>

      <div class="input-box">
        <input v-model="userInput" placeholder="Type your string (A-Z only)" />
        <button @click="generate">Generate</button>
        
      </div>


      <div class="quick-try">Click Generate to see your crystal string âœ¨</div>

      <div id="crystal-output" class="crystal-row" v-if="images.length">
        <img v-for="(src, idx) in images" :key="idx" :src="src" alt="char" />
      </div>

        <div class="colormap-buttons">
            <button
            v-for="color in ['grey', 'purple', 'blue', 'green', 'orange', 'red']"
            :key="color"
            :class="['colormap-button', { selected: selectedColormap === color }]"
            @click="applyColormap(color)"
            >
            Apply {{ color }} colormap
            </button>
        </div>
    </main>
  </div>

<script>
  const { createApp } = Vue;
  createApp({
    data() {
      return {
        userInput: "",
        images: [],
        baseURL: "https://lightstring-images.s3.amazonaws.com/String_images",
        iteration: 1000,
        selectedColormap: null,
      };
    },
    methods: {
      applyColormap(color) {
        this.selectedColormap = color;
        this.generate();

        // Optional: apply color filter for fun (UI-only, not needed for file logic)
        const filterMap = {
          grey: 'grayscale(100%)',
          purple: 'hue-rotate(270deg)',
          blue: 'hue-rotate(200deg)',
          green: 'hue-rotate(100deg)',
          orange: 'hue-rotate(45deg)',
          red: 'hue-rotate(0deg)',
        };
        const output = document.getElementById("crystal-output");
        if (output) {
          output.style.filter = filterMap[color] || 'none';
        }
      },
      generate() {
        if (!this.selectedColormap) return;

        const input = this.userInput.replace(/[^a-zA-Z ]/g, "");
        this.images = input.split('').flatMap(char => {
          if (char === ' ') return [];

          const caseType = char === char.toUpperCase() ? "uppercase" : "lowercase";
          const upperChar = char.toUpperCase();
          const filename = `${this.selectedColormap}_${upperChar}_${caseType}_dof00${this.iteration}.png`;
          return [`${this.baseURL}/${filename}`];
        });
      }
    }
  }).mount("#app");
</script>
</body>
</html>